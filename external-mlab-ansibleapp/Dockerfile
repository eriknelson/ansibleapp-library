FROM ansibleapp/ansibleapp-base
# MAINTAINER {{ $MAINTAINER }}

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"aWQ6IDA3MWYzNjQ1LTcxODktNDgwOC1iOWMyLTJkMjljMTQzZTgwZApuYW1lOiBleHRlcm5hbC1t\
bGFiLWFuc2libGVhcHAKaW1hZ2U6IGVyaWtuZWxzb24vZXh0ZXJuYWwtbWxhYi1hbnNpYmxlYXBw\
CmRlc2NyaXB0aW9uOiBCaW5kYWJsZSBhbnNpYmxlYXBwIHNoaW0gZm9yIGV4dGVybmFsIG1sYWIg\
bW9uZ29kYiBkYXRhYmFzZQpiaW5kYWJsZTogdHJ1ZQphc3luYzogInVuc3VwcG9ydGVkIgpwYXJh\
bWV0ZXJzOgogIC0gbmFtZTogcHJvamVjdF9uYW1lCiAgICBkZXNjcmlwdGlvbjogb3BlbnNoaWZ0\
IHByb2plY3QgbmFtZQogICAgcmVxdWlyZWQ6IGZhbHNlCiAgLSBuYW1lOiBiaW5kaW5nX2tleQog\
ICAgZGVzY3JpcHRpb246IGtleSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBiaW5kaW5nIGluZm8KICAg\
IHR5cGU6IHN0cmluZwogIC0gbmFtZTogaXAKICAgIGRlc2NyaXB0aW9uOiBtb25nb2RiIGlwIGFk\
ZHJlc3MKICAtIG5hbWU6IHBvcnQKICAgIGRlc2NyaXB0aW9uOiBtb25nb2RiIHBvcnQKICAtIG5h\
bWU6IGRiCiAgICBkZXNjcmlwdGlvbjogbW9uZ29kYiBkYXRhYmFzZQogIC0gbmFtZTogYWNjdF9v\
bmVfdXNlcgogICAgZGVzY3JpcHRpb246IGZpcnN0IGFjY291bnQgdXNlcgogIC0gbmFtZTogYWNj\
dF9vbmVfcGFzcwogICAgZGVzY3JpcHRpb246IHNlY29uZCBhY2NvdW50IHBhc3MKICAtIG5hbWU6\
IGFjY3RfdHdvX3VzZXIKICAgIGRlc2NyaXB0aW9uOiBzZWNvbmQgYWNjb3VudCB1c2VyCiAgLSBu\
YW1lOiBhY2N0X3R3b19wYXNzCiAgICBkZXNjcmlwdGlvbjogc2Vjb25kIGFjY291bnQgcGFzcwo="

ADD ansibleapp /opt/ansibleapp

RUN useradd -u 1001 -r -g 0 -M -b /opt/ansibleapp -s /sbin/nologin -c "ansibleapp user" ansibleapp
RUN chown -R 1001:0 /opt/ansibleapp
USER 1001
